"use strict";(()=>{var T={enable:!0,loadingImg:"/img/loading.gif",onlyPost:!1,offsetFactor:2},v=class{constructor(e={}){this.observer=null;this.loadedImages=new Set;this.config={...T,...e}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e}}init(e=document){if(!this.config.enable||typeof window>"u")return;if(this.isBot()){this.loadAllImages(e);return}this.createObserver(),this.getLazyImages(e).forEach(t=>{this.observer&&this.observer.observe(t)})}isBot(){return typeof navigator>"u"?!1:/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent)}createObserver(){if(!("IntersectionObserver"in window)){console.warn("IntersectionObserver not supported, using fallback");return}let n=`${(window.innerHeight||document.documentElement.clientHeight)*this.config.offsetFactor}px 0px`;this.observer=new IntersectionObserver(t=>{t.forEach(s=>{if(s.isIntersecting){let a=s.target;this.loadImage(a),this.observer?.unobserve(a)}})},{threshold:[0],rootMargin:n})}getLazyImages(e){let n=[];return e.querySelectorAll("img[lazyload]").forEach(a=>n.push(a)),e.querySelectorAll("img[data-src]").forEach(a=>{n.includes(a)||n.push(a)}),n}loadImage(e){if(this.loadedImages.has(e))return;e.hasAttribute("lazyload")&&(e.removeAttribute("srcset"),e.removeAttribute("lazyload"));let n=e.getAttribute("data-src");n&&(e.src=n,e.removeAttribute("data-src")),this.loadedImages.add(e),e.dispatchEvent(new CustomEvent("lazyloaded"))}loadAllImages(e){this.getLazyImages(e).forEach(t=>this.loadImage(t))}loadImageManually(e){this.loadImage(e),this.observer?.unobserve(e)}observe(e){this.observer&&!this.loadedImages.has(e)&&this.observer.observe(e)}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.loadedImages.clear()}isLoaded(e){return this.loadedImages.has(e)}getLoadedCount(){return this.loadedImages.size}};var h=null;function M(){return h||(h=new v),h}function w(o){let e=M();return o&&e.updateConfig(o),e.init(),e}function H(){let o=document.getElementById("navbar");if(!o)return;let e=o.querySelector(".dropdown-menu"),n=o,t=e;function s(){let i=window.scrollY||document.documentElement.scrollTop,r=n.getBoundingClientRect().top+i;i>50?(n.classList.add("top-nav-collapse"),t?.classList.add("dropdown-collapse")):(n.classList.remove("top-nav-collapse"),t?.classList.remove("dropdown-collapse")),r>0?(n.classList.remove("navbar-dark"),t?.classList.remove("navbar-dark")):(n.classList.add("navbar-dark"),t?.classList.remove("navbar-dark"))}s();let a=!1;window.addEventListener("scroll",()=>{a||(window.requestAnimationFrame(()=>{s(),a=!1}),a=!0)},{passive:!0})}function I(){let o=document.getElementById("navbar-toggler-btn"),e=document.getElementById("navbarSupportedContent"),n=document.getElementById("navbar"),t=document.querySelector(".animated-icon");if(!o||!e)return;let s=!1;o.addEventListener("click",()=>{if(s)return;s=!0,t?.classList.toggle("open"),e.classList.toggle("show"),n?.classList.toggle("navbar-col-show");let a=e.classList.contains("show");o.setAttribute("aria-expanded",String(a)),setTimeout(()=>{s=!1},300)}),document.addEventListener("click",a=>{!a.target.closest(".navbar")&&e.classList.contains("show")&&(t?.classList.remove("open"),e.classList.remove("show"),n?.classList.remove("navbar-col-show"),o.setAttribute("aria-expanded","false"))}),window.addEventListener("resize",()=>{window.innerWidth>=992&&e.classList.contains("show")&&(t?.classList.remove("open"),e.classList.remove("show"),n?.classList.remove("navbar-col-show"),o.setAttribute("aria-expanded","false"))})}function C(){let o=document.querySelectorAll(".navbar .dropdown-toggle");if(o.length===0)return;o.forEach(n=>{n.addEventListener("click",t=>{if(window.innerWidth>=992)return;t.preventDefault(),t.stopPropagation();let s=n.closest(".dropdown");if(!s)return;let a=s.querySelector(".dropdown-menu");if(!a)return;document.querySelectorAll(".navbar .dropdown").forEach(u=>{if(u!==s){u.classList.remove("show");let c=u.querySelector(".dropdown-menu");c&&c.classList.remove("show");let l=u.querySelector(".dropdown-arrow");l&&l.classList.remove("open")}}),s.classList.toggle("show"),a.classList.toggle("show");let r=n.querySelector(".dropdown-arrow");r&&r.classList.toggle("open");let g=a.classList.contains("show");n.setAttribute("aria-expanded",String(g))})}),document.querySelectorAll(".navbar .dropdown-item").forEach(n=>{n.addEventListener("click",()=>{if(window.innerWidth>=992)return;document.querySelectorAll(".navbar .dropdown").forEach(s=>{s.classList.remove("show");let a=s.querySelector(".dropdown-menu");a&&a.classList.remove("show");let i=s.querySelector(".dropdown-arrow");i&&i.classList.remove("open");let r=s.querySelector(".dropdown-toggle");r&&r.setAttribute("aria-expanded","false")})})}),window.addEventListener("resize",()=>{window.innerWidth>=992&&document.querySelectorAll(".navbar .dropdown").forEach(t=>{t.classList.remove("show");let s=t.querySelector(".dropdown-menu");s&&s.classList.remove("show");let a=t.querySelector(".dropdown-arrow");a&&a.classList.remove("open");let i=t.querySelector(".dropdown-toggle");i&&i.setAttribute("aria-expanded","false")})})}function S(){let o=document.getElementById("scroll-top-button");if(!o)return;let e=document.getElementById("board");if(!e)return;let n=!1,t=!1;function s(){let u=e.getBoundingClientRect().right,l=document.body.offsetWidth-u;n=l>=50,o.style.bottom=n&&t?"20px":"-60px",o.style.right=`${l-64}px`}s(),window.addEventListener("resize",s);let a=e.offsetTop;function i(){t=document.body.scrollTop+document.documentElement.scrollTop>=a,o.style.bottom=n&&t?"20px":"-60px"}let r=!1;window.addEventListener("scroll",()=>{r||(window.requestAnimationFrame(()=>{i(),r=!1}),r=!0)},{passive:!0}),o.addEventListener("click",g=>{g.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),i()}function A(){let o=document.getElementById("banner");if(!o||o.getAttribute("parallax")!=="true")return;let e=document.getElementById("board");if(!e)return;function n(){let a=(window.scrollY||document.documentElement.scrollTop)/5,i=window.getComputedStyle(e),g=96+(parseInt(i.marginTop,10)||0);a>g&&(a=g),o.style.transform=`translate3d(0, ${a}px, 0)`,document.querySelectorAll(".side-col").forEach(c=>{c.style.paddingTop=`${a}px`})}let t=!1;window.addEventListener("scroll",()=>{t||(window.requestAnimationFrame(()=>{n(),t=!1}),t=!0)},{passive:!0}),n()}function x(){let o=document.querySelector(".scroll-down-bar");o&&o.addEventListener("click",()=>{let e=document.getElementById("board"),n=document.getElementById("navbar");if(e){let t=n?n.offsetHeight:0,a=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:a,behavior:"smooth"})}})}function q(){let o=document.querySelector(".progress-bar");if(!o)return;function e(){let n=window.scrollY,t=document.documentElement.scrollHeight-window.innerHeight,s=t>0?n/t*100:0;o.style.width=`${s}%`}window.addEventListener("scroll",e,{passive:!0}),e()}function k(o){let t=window.getComputedStyle(o).backgroundColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(!t)return 0;let s=parseInt(t[1],10),a=parseInt(t[2],10),i=parseInt(t[3],10);return(s*299+a*587+i*114)/1e3>=128?1:-1}function z(o,e){let n=o.closest(".highlight");if(n){let a=n.getAttribute("data-lang");if(a)return a.toUpperCase()}let t=o.querySelector("code");if(t){let a=t.className.split(" ");for(let i of a){if(i.startsWith("language-"))return i.replace("language-","").toUpperCase();if(i!=="hljs"&&!i.startsWith("chroma"))return i.toUpperCase()}}let s=o.getAttribute("data-language");return s?s.toUpperCase():e}function N(){let e=window.CONFIG?.code,n=e?.language?.enable??!0,t=e?.language?.default??"TEXT",s=e?.copy_btn??!0;if(!n&&!s)return;document.querySelectorAll(".markdown-body pre, .markdown-body .highlight pre").forEach(i=>{if(i.querySelector("code.mermaid")||i.querySelector(".code-widget"))return;let r="";if(n){let l=i.querySelector("code")?.getAttribute("data-lang");l?r=l.toUpperCase():r=z(i,t),(r==="NONE"||r==="PLAINTEXT"||r==="TEXT"||r==="")&&(r=t)}let g=k(i)>=0?"code-widget-light":"code-widget-dark",u=document.createElement("div");if(u.className=`code-widget ${g}`,n&&r){let c=document.createElement("span");c.className="code-lang",c.textContent=r,u.appendChild(c)}if(s){let c=document.createElement("button");c.className="copy-btn",c.setAttribute("aria-label","Copy code"),c.setAttribute("title","Copy");let l=document.createElement("i");l.className="iconfont icon-copy",c.appendChild(l),c.addEventListener("click",async()=>{let d=i.querySelector("code")?.textContent||i.textContent||"";try{await navigator.clipboard.writeText(d),l.className="iconfont icon-success",setTimeout(()=>{l.className="iconfont icon-copy"},2e3)}catch{try{let m=document.createElement("textarea");m.value=d,m.style.position="fixed",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m),l.className="iconfont icon-success",setTimeout(()=>{l.className="iconfont icon-copy"},2e3)}catch{console.error("Failed to copy code")}}}),u.appendChild(c)}i.style.position="relative",i.appendChild(u)})}function B(){let o=document.getElementById("toc");if(!o)return;let e=document.getElementById("toc-body");if(!e)return;let n=e.querySelectorAll("a");if(n.length===0)return;o.classList.add("toc-visible");let t=parseInt(o.dataset.collapseDepth||"0",10),s=[],a=new Map;if(n.forEach(l=>{let f=l.getAttribute("href");if(f?.startsWith("#")){let d=decodeURIComponent(f.slice(1)),m=document.getElementById(d);m&&(s.push(m),a.set(d,m))}}),s.length===0)return;let i=document.getElementById("navbar"),g=(i?i.offsetHeight:0)+20;t>0&&O(e,t);function u(){let l=window.scrollY+g,f=-1;for(let d=s.length-1;d>=0;d--)if(s[d].offsetTop<=l){f=d;break}f===-1&&s.length>0&&(f=0),n.forEach((d,m)=>{let p=d.parentElement;m===f?(d.classList.add("toc-active"),p?.classList.add("toc-active-li"),t>0&&D(d),W(d,e)):(d.classList.remove("toc-active"),p?.classList.remove("toc-active-li"))})}n.forEach(l=>{l.addEventListener("click",f=>{f.preventDefault();let d=l.getAttribute("href");if(!d?.startsWith("#"))return;let m=decodeURIComponent(d.slice(1)),p=document.getElementById(m);if(!p)return;let y=p.offsetTop-g+10;window.scrollTo({top:y,behavior:"smooth"}),history.pushState(null,"",d)})});let c=!1;window.addEventListener("scroll",()=>{c||(window.requestAnimationFrame(()=>{u(),c=!1}),c=!0)},{passive:!0}),u()}function O(o,e){o.querySelectorAll("nav ul ul").forEach(t=>{let s=0,a=t.parentElement;for(;a&&a!==o;)a.tagName==="UL"&&s++,a=a.parentElement;s>=e?t.classList.add("toc-collapsible","toc-collapsed"):t.classList.add("toc-collapsible")})}function D(o){let e=o.parentElement;for(;e;)e.tagName==="UL"&&e.classList.contains("toc-collapsed")&&e.classList.remove("toc-collapsed"),e=e.parentElement}function W(o,e){let n=o.getBoundingClientRect(),t=e.getBoundingClientRect();if(n.top<t.top||n.bottom>t.bottom){let s=o.offsetTop-e.offsetHeight/2+o.offsetHeight/2;e.scrollTo({top:s,behavior:"smooth"})}}function F(){let e=window.CONFIG?.lazyload;if(e&&e.enable===!1)return;let n={};e&&(typeof e.enable=="boolean"&&(n.enable=e.enable),e.loading_img&&(n.loadingImg=e.loading_img),typeof e.onlypost=="boolean"&&(n.onlyPost=e.onlypost),typeof e.offset_factor=="number"&&(n.offsetFactor=e.offset_factor)),w(n)}function P(){let o=document.getElementById("color-toggle-btn");o&&(o.addEventListener("click",()=>{window.FluidColorScheme&&(window.FluidColorScheme.toggle(),L())}),L(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{L()}))}function L(){let o=document.getElementById("color-toggle-icon");if(!o)return;(window.FluidColorScheme?.getResolved()||"light")==="dark"?o.className="iconfont icon-dark":o.className="iconfont icon-light"}function R(){document.querySelectorAll(".post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6").forEach(e=>{let n=e.id;if(!n)return;let t=document.createElement("a");t.className="anchor-link",t.href=`#${n}`,t.setAttribute("aria-label","Link to this section"),t.innerHTML='<span class="anchor-icon">#</span>',e.classList.add("relative","group"),e.appendChild(t)})}function U(){document.querySelectorAll('[data-toggle="modal"]').forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();let a=t.getAttribute("data-target");if(!a)return;let i=document.querySelector(a);i&&_(i)})}),document.querySelectorAll('[data-dismiss="modal"]').forEach(t=>{t.addEventListener("click",()=>{let s=t.closest(".modal");s&&b(s)})}),document.querySelectorAll(".modal").forEach(t=>{t.addEventListener("click",s=>{s.target===t&&b(t)})}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){let s=document.querySelector(".modal.show");s&&b(s)}})}function _(o){document.body.classList.add("modal-open"),document.body.style.overflow="hidden",o.style.display="block",o.classList.add("show"),o.setAttribute("aria-hidden","false");let e=document.querySelector(".modal-backdrop");e||(e=document.createElement("div"),e.className="modal-backdrop fade show",document.body.appendChild(e)),setTimeout(()=>{o.dispatchEvent(new Event("shown.bs.modal"))},150)}function b(o){document.body.classList.remove("modal-open"),document.body.style.overflow="",o.classList.remove("show"),o.setAttribute("aria-hidden","true"),setTimeout(()=>{o.style.display="none"},150);let e=document.querySelector(".modal-backdrop");e&&e.remove(),o.dispatchEvent(new Event("hidden.bs.modal"))}function E(){H(),I(),C(),A(),S(),x(),q(),N(),B(),F(),P(),R(),U()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();})();
